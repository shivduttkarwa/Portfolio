<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shivdutt | Full-Stack Developer</title>
    <link
      href="https://fonts.cdnfonts.com/css/neue-montreal"
      rel="stylesheet"
    />
    <link
      href="https://fonts.cdnfonts.com/css/editorial-new"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Martian+Mono:wght@100..800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />

    <!-- Custom Fonts -->
    <link href="https://fonts.cdnfonts.com/css/vcr-osd-mono" rel="stylesheet" />
    <link
      href="https://fonts.cdnfonts.com/css/departure-mono"
      rel="stylesheet"
    />
    <link href="https://fonts.cdnfonts.com/css/threedpixel" rel="stylesheet" />
    <link href="https://fonts.cdnfonts.com/css/3d-isometric" rel="stylesheet" />

    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper@8/swiper-bundle.min.css"
    />
    <!-- Swiper JS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <!-- Font Awesome for icons (optional) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Hamburger Menu Button -->
    <button class="hamburger-menu" id="hamburger">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Interactive Cursor with Particles -->
    <div class="menu-cursor" id="menu-cursor">
      <div class="cursor-core"></div>
      <div class="cursor-trail"></div>
    </div>

    <!-- Split Screen Full Page Menu -->
    <div class="fullpage-menu" id="fullpage-menu">
      <div class="menu-background"></div>

      <!-- Left Half - Navigation -->
      <div class="menu-left">
        <nav class="main-navigation">
          <div class="nav-item">
            <span class="nav-number">01</span>
            <a href="#work" class="nav-link">
              <span class="nav-text" data-text="WORK">WORK</span>
              <span class="nav-subtitle">Selected Projects</span>
            </a>
          </div>
          <div class="nav-item">
            <span class="nav-number">02</span>
            <a href="#services" class="nav-link">
              <span class="nav-text" data-text="SERVICES">SERVICES</span>
              <span class="nav-subtitle">What I Offer</span>
            </a>
          </div>
          <div class="nav-item">
            <span class="nav-number">03</span>
            <a href="#testimonials" class="nav-link">
              <span class="nav-text" data-text="TESTIMONIALS">TESTIMONIALS</span>
              <span class="nav-subtitle">Client Reviews</span>
            </a>
          </div>
          <div class="nav-item">
            <span class="nav-number">04</span>
            <a href="#about" class="nav-link">
              <span class="nav-text" data-text="ABOUT">ABOUT</span>
              <span class="nav-subtitle">My Story</span>
            </a>
          </div>
          <div class="nav-item">
            <span class="nav-number">05</span>
            <a href="#contact" class="nav-link">
              <span class="nav-text" data-text="CONTACT">CONTACT</span>
              <span class="nav-subtitle">Let's Talk</span>
            </a>
          </div>
        </nav>
      </div>

      <!-- Right Half - Logo & Contact -->
      <div class="menu-right">
        <div class="menu-right-content">
          <!-- Logo Section -->
          <div class="logo-section">
            <img src="img/logo.png" alt="Shivdutt Logo" class="menu-logo" />
          </div>

          <!-- Contact Buttons -->
          <div class="contact-buttons">
            <a
              href="mailto:shivduttkarwa@gmail.com"
              class="contact-btn primary"
            >
              <i class="fa fa-envelope"></i>
              <span>Get In Touch</span>
            </a>
            <a href="#" class="contact-btn secondary">
              <i class="fa fa-download"></i>
              <span>Download CV</span>
            </a>
          </div>

          <!-- Social Media -->
          <div class="social-links">
            <a href="#" class="social-link">
              <i class="fa fa-github"></i>
              <span>GitHub</span>
            </a>
            <a href="#" class="social-link">
              <i class="fa fa-linkedin"></i>
              <span>LinkedIn</span>
            </a>
            <a href="#" class="social-link">
              <i class="fa fa-twitter"></i>
              <span>Twitter</span>
            </a>
            <a href="#" class="social-link">
              <i class="fa fa-instagram"></i>
              <span>Instagram</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Sections with GSAP Scroll -->
    <section class="outer-section">
      <div class="outer">
        <div class="inner">
          <div class="bg home">
            <!-- Hero Section -->
            <div class="hero">
              <a-hole>
                <canvas class="js-canvas"></canvas>
              </a-hole>

              <!-- Hero Image on Left -->
              <div class="hero-image-wrapper">
                <img src="img/1111.png" alt="Shivdutt" class="hero-image" />
              </div>

              <!-- Hero Content on Right -->
              <div class="hero-content">
                <h1 class="hero-title">
                  <span>FULL-STACK</span>
                  <span>DEVELOPER</span>
                </h1>
                <p class="hero-subtitle">Building robust digital experiences</p>
              </div>

              <div class="scroll-hint">
                <span>SCROLL</span>
                <div class="hint-line"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="outer-section">
      <div class="outer">
        <div class="inner">
          <div class="bg projects">
            <!-- Services Section -->
            <div class="services" id="services">
              <div class="services-container">
                <div class="services-header">
                  <h2 class="services-title">SERVICES</h2>
                  <p class="services-subtitle">
                    Crafting digital excellence across the full stack
                  </p>
                </div>

                <div class="services-grid">
                  <div class="service-card" data-service="frontend">
                    <div class="service-icon">
                      <span class="service-number">01</span>
                    </div>
                    <div class="service-content">
                      <h3 class="service-title">Frontend Development</h3>
                      <p class="service-description">
                        Modern, responsive interfaces built with cutting-edge
                        frameworks
                      </p>
                      <div class="service-tech">
                        <span class="tech-tag">React</span>
                        <span class="tech-tag">Next.js</span>
                        <span class="tech-tag">TypeScript</span>
                        <span class="tech-tag">Tailwind</span>
                      </div>
                    </div>
                    <div class="service-arrow">→</div>
                  </div>

                  <div class="service-card" data-service="backend">
                    <div class="service-icon">
                      <span class="service-number">02</span>
                    </div>
                    <div class="service-content">
                      <h3 class="service-title">Backend Development</h3>
                      <p class="service-description">
                        Scalable server architectures and robust API solutions
                      </p>
                      <div class="service-tech">
                        <span class="tech-tag">Node.js</span>
                        <span class="tech-tag">.NET</span>
                        <span class="tech-tag">Python</span>
                        <span class="tech-tag">PostgreSQL</span>
                      </div>
                    </div>
                    <div class="service-arrow">→</div>
                  </div>

                  <div class="service-card" data-service="cloud">
                    <div class="service-icon">
                      <span class="service-number">03</span>
                    </div>
                    <div class="service-content">
                      <h3 class="service-title">Cloud Solutions</h3>
                      <p class="service-description">
                        Deployment, scaling, and infrastructure optimization
                      </p>
                      <div class="service-tech">
                        <span class="tech-tag">AWS</span>
                        <span class="tech-tag">Docker</span>
                        <span class="tech-tag">Kubernetes</span>
                        <span class="tech-tag">Terraform</span>
                      </div>
                    </div>
                    <div class="service-arrow">→</div>
                  </div>

                  <div class="service-card" data-service="mobile">
                    <div class="service-icon">
                      <span class="service-number">04</span>
                    </div>
                    <div class="service-content">
                      <h3 class="service-title">Mobile Development</h3>
                      <p class="service-description">
                        Cross-platform apps with native performance
                      </p>
                      <div class="service-tech">
                        <span class="tech-tag">React Native</span>
                        <span class="tech-tag">Flutter</span>
                        <span class="tech-tag">iOS</span>
                        <span class="tech-tag">Android</span>
                      </div>
                    </div>
                    <div class="service-arrow">→</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="outer-section">
      <div class="outer">
        <div class="inner">
          <div class="bg testimonials">
            <!-- Testimonials Section with Swiper -->
            <div class="testimonials" id="testimonials">
              <h2 class="section-title">TESTIMONIALS</h2>
              <div class="swiper testimonials-swiper">
                <div class="swiper-wrapper">
                  <!-- Testimonial Slides (10 total) -->
                  <div class="swiper-slide">
                    <blockquote>
                      "Shivdutt delivered our e-commerce platform 2 weeks ahead of
                      schedule with zero bugs. His attention to detail is unmatched."
                    </blockquote>
                    <div class="client-info">
                      <p>Sarah Johnson</p>
                      <p>CEO, TechCorp</p>
                    </div>
                  </div>
                  <div class="swiper-slide">
                    <blockquote>
                      "The mobile app Shivdutt developed increased our user retention
                      by 40%. His technical expertise is outstanding."
                    </blockquote>
                    <div class="client-info">
                      <p>Michael Chen</p>
                      <p>CTO, AppVantage</p>
                    </div>
                  </div>
                  <!-- Additional slides would go here -->
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="outer-section">
      <div class="outer">
        <div class="inner">
          <div class="bg about">
            <!-- About Section -->
            <div class="about" id="about">
              <h2 class="section-title">ABOUT ME</h2>
              <div class="about-content">
                <div class="about-text">
                  <p>
                    I'm Shivdutt, a full-stack developer with 5+ years of experience
                    building scalable web applications.
                  </p>
                  <p>
                    My expertise spans from UI design to cloud infrastructure,
                    ensuring end-to-end project success.
                  </p>
                </div>
                <div class="skills">
                  <div class="skills-column">
                    <h4>Frontend</h4>
                    <ul>
                      <li>React.js</li>
                      <li>TypeScript</li>
                      <li>Next.js</li>
                      <li>GSAP</li>
                      <li>Three.js</li>
                    </ul>
                  </div>
                  <div class="skills-column">
                    <h4>Backend</h4>
                    <ul>
                      <li>Node.js</li>
                      <li>Express</li>
                      <li>GraphQL</li>
                      <li>PostgreSQL</li>
                      <li>MongoDB</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="outer-section">
      <div class="outer">
        <div class="inner">
          <div class="bg contact">
            <!-- Contact Section -->
            <div class="contact" id="contact">
              <h2>GET IN TOUCH</h2>
              <div class="contact-content">
                <a href="mailto:hello@Shivduttkarwa@gmail.com" class="contact-email"
                  >shivduttkarwa@gmail.com</a
                >
                <div class="contact-links">
                  <a href="#" target="_blank">GitHub</a>
                  <a href="#" target="_blank">LinkedIn</a>
                  <a href="#" target="_blank">Twitter</a>
                  <a href="#" target="_blank">Resume</a>
                </div>
              </div>
              <footer>
                <p>© 2025 Shivdutt. All rights reserved.</p>
                <p>Built with passion</p>
              </footer>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Observer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/split-type"></script>
    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
    <script src="script.js"></script>

    <script>
      // GSAP Scroll Animation
      gsap.registerPlugin(Observer);

      let sections = document.querySelectorAll(".outer-section"),
        background = document.querySelectorAll(".bg"),
        outerWrappers = gsap.utils.toArray(".outer"),
        innerWrappers = gsap.utils.toArray(".inner"),
        currentIndex = -1,
        wrap = gsap.utils.wrap(0, sections.length - 1),
        animating;

      let clamp = gsap.utils.clamp(0, sections.length - 1);

      gsap.set(outerWrappers, { yPercent: 100 });
      gsap.set(innerWrappers, { yPercent: -100 });

      function gotoSection(index, direction) {
        index = clamp(index); // make sure it's valid

        // If they are the same, it's either the first or last slide
        if (index === currentIndex) {
          return;
        }

        animating = true;
        let fromTop = direction === -1,
          dFactor = fromTop ? -1 : 1,
          tl = gsap.timeline({
            defaults: { duration: 1.25, ease: "power1.inOut" },
            onComplete: () => (animating = false),
          });
        if (currentIndex >= 0) {
          // The first time this function runs, current is -1
          gsap.set(sections[currentIndex], { zIndex: 0 });
          tl.to(background[currentIndex], { yPercent: -15 * dFactor }).set(
            sections[currentIndex],
            { autoAlpha: 0 }
          );
        }
        gsap.set(sections[index], { autoAlpha: 1, zIndex: 1 });
        tl.fromTo(
          [outerWrappers[index], innerWrappers[index]],
          { yPercent: (i) => (i ? -100 * dFactor : 100 * dFactor) },
          { yPercent: 0 },
          0
        ).fromTo(background[index], { yPercent: 15 * dFactor }, { yPercent: 0 }, 0);

        currentIndex = index;
        return tl;
      }

      Observer.create({
        type: "wheel, pointer",
        wheelSpeed: -1,
        onDown: () => {
          !animating && gotoSection(currentIndex - 1, -1);
        },
        onUp: () => {
          !animating && gotoSection(currentIndex + 1, 1);
        },
        tolerance: 200,
        allowClicks: true,
        preventDefault: true,
      });

      gotoSection(0, 1).progress(1);

      // Initialize Testimonials Swiper
      const testimonialsSwiper = new Swiper(".testimonials-swiper", {
        slidesPerView: 1,
        spaceBetween: 50,
        loop: true,
        centeredSlides: true,
        autoplay: {
          delay: 5000,
          disableOnInteraction: false,
        },
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
        breakpoints: {
          1024: {
            slidesPerView: 1.2,
          },
        },
      });

      // Hero Image Animation
      gsap.from(".hero-image-wrapper", {
        x: -50,
        opacity: 0,
        duration: 1.5,
        ease: "power3.out",
        delay: 0.4,
      });

      // Text Animation
      const heroTitle = document.querySelector(".hero-title");
      const splitTitle = new SplitType(heroTitle, { types: "chars" });

      gsap.from(splitTitle.chars, {
        y: 100,
        opacity: 0,
        stagger: 0.05,
        duration: 0.8,
        ease: "power3.out",
      });

      // Premium Split Screen Menu with Advanced Effects
      const hamburger = document.getElementById("hamburger");
      const fullpageMenu = document.getElementById("fullpage-menu");
      const menuCursor = document.getElementById("menu-cursor");
      const cursorCore = document.querySelector(".cursor-core");
      const cursorTrail = document.querySelector(".cursor-trail");

      let mouseX = 0,
        mouseY = 0;
      let cursorX = 0,
        cursorY = 0;

      // Smooth cursor following
      function updateCursor() {
        cursorX += (mouseX - cursorX) * 0.1;
        cursorY += (mouseY - cursorY) * 0.1;

        if (menuCursor) {
          menuCursor.style.left = cursorX + "px";
          menuCursor.style.top = cursorY + "px";
        }

        requestAnimationFrame(updateCursor);
      }

      // Mouse tracking
      document.addEventListener("mousemove", (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      // Cursor interaction with elements
      document
        .querySelectorAll(".nav-link, .contact-btn, .social-link, .menu-logo")
        .forEach((element) => {
          element.addEventListener("mouseenter", () => {
            if (cursorTrail) {
              cursorTrail.style.transform = "translate(-50%, -50%) scale(1.2)";
              cursorTrail.style.borderColor = "rgba(255, 94, 26, 0.6)";
              cursorTrail.style.borderWidth = "2px";
            }
            if (cursorCore) {
              cursorCore.style.transform = "translate(-50%, -50%) scale(1.2)";
            }
          });

          element.addEventListener("mouseleave", () => {
            if (cursorTrail) {
              cursorTrail.style.transform = "translate(-50%, -50%) scale(1)";
              cursorTrail.style.borderColor = "rgba(255, 94, 26, 0.2)";
              cursorTrail.style.borderWidth = "1px";
            }
            if (cursorCore) {
              cursorCore.style.transform = "translate(-50%, -50%) scale(1)";
            }
          });
        });

      updateCursor();

      if (hamburger && fullpageMenu) {
        hamburger.addEventListener("click", () => {
          hamburger.classList.toggle("active");
          fullpageMenu.classList.toggle("active");
          document.body.style.overflow = fullpageMenu.classList.contains("active")
            ? "hidden"
            : "";

          // Add entrance sound effect simulation
          if (fullpageMenu.classList.contains("active")) {
            setTimeout(() => {
              document.querySelectorAll(".nav-item").forEach((item, index) => {
                setTimeout(() => {
                  item.style.transform = "translateY(0) rotateX(0deg) scale(1.02)";
                  setTimeout(() => {
                    item.style.transform = "translateY(0) rotateX(0deg) scale(1)";
                  }, 100);
                }, index * 100);
              });
            }, 800);
          }
        });
      }

      // Close menu when clicking navigation links and handle smooth scrolling
      if (hamburger && fullpageMenu) {
        document.querySelectorAll(".fullpage-menu .nav-link").forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();

            // Close menu
            hamburger.classList.remove("active");
            fullpageMenu.classList.remove("active");
            document.body.style.overflow = "";

            // Get target section
            const targetId = link.getAttribute("href");
            const targetSection = document.querySelector(targetId);

            if (targetSection) {
              // Scroll to section using GSAP
              gsap.to(window, {
                scrollTo: { y: targetSection, autoKill: false },
                duration: 1,
                ease: "power2.inOut"
              });
            }
          });
        });
      }
    </script>

    <script type="module">
      // Simple easing functions
      const easingUtils = {
        linear: (t) => t,
        easeInExpo: (t) => (t === 0 ? 0 : Math.pow(2, 10 * (t - 1))),
        easeOutExpo: (t) => (t === 1 ? 1 : 1 - Math.pow(2, -10 * t)),
        easeInOutExpo: (t) => {
          if (t === 0) return 0;
          if (t === 1) return 1;
          if ((t /= 0.5) < 1) return 0.5 * Math.pow(2, 10 * (t - 1));
          return 0.5 * (-Math.pow(2, -10 * --t) + 2);
        },
      };

      class AHole extends HTMLElement {
        connectedCallback() {
          // Elements
          this.canvas = this.querySelector(".js-canvas");
          this.ctx = this.canvas.getContext("2d");

          this.discs = [];
          this.lines = [];
          this.codeTexts = [
            // React
            "const [state, setState] = useState();",
            "useEffect(() => {}, []);",
            'import React from "react";',
            "export default function App() {",
            "return <Component />;",

            // Angular
            '@Component({ selector: "app-hero" })',
            "constructor(private service: Service) {}",
            "ngOnInit(): void {",
            "this.data$ = this.service.getData();",
            '*ngFor="let item of items"',

            // Python
            "def create_app():",
            "import pandas as pd",
            "class UserModel(BaseModel):",
            "async def get_data():",
            "return JsonResponse(data)",
            'if __name__ == "__main__":',

            // JavaScript
            "async function fetchData() {",
            "const response = await fetch();",
            'document.querySelector(".hero")',
            'console.log("Full-Stack Dev");',

            // .NET
            "public class ApiController : Controller",
            "public async Task<IActionResult> Get()",
            "using Microsoft.AspNetCore.Mvc;",
            "services.AddScoped<IService>();",
            "app.UseCors();",
          ];

          // Init
          this.setSize();
          this.setDiscs();
          this.setLines();
          this.setCodeParticles();

          this.bindEvents();

          // RAF
          requestAnimationFrame(this.tick.bind(this));
        }

        bindEvents() {
          window.addEventListener("resize", this.onResize.bind(this));
        }

        onResize() {
          this.setSize();
          this.setDiscs();
          this.setLines();
          this.setCodeParticles();
        }

        setSize() {
          this.rect = this.getBoundingClientRect();

          this.render = {
            width: this.rect.width,
            height: this.rect.height,
            dpi: window.devicePixelRatio,
          };

          this.canvas.width = this.render.width * this.render.dpi;
          this.canvas.height = this.render.height * this.render.dpi;
        }

        setDiscs() {
          const { width, height } = this.rect;

          this.discs = [];

          this.startDisc = {
            x: width * 0.5,
            y: height * 0.45,
            w: width * 0.75,
            h: height * 0.7,
          };

          this.endDisc = {
            x: width * 0.5,
            y: height * 0.95,
            w: 0,
            h: 0,
          };

          const totalDiscs = 100;

          let prevBottom = height;
          this.clip = {};

          for (let i = 0; i < totalDiscs; i++) {
            const p = i / totalDiscs;

            const disc = this.tweenDisc({
              p,
            });

            const bottom = disc.y + disc.h;

            if (bottom <= prevBottom) {
              this.clip = {
                disc: { ...disc },
                i,
              };
            }

            prevBottom = bottom;

            this.discs.push(disc);
          }

          this.clip.path = new Path2D();
          this.clip.path.ellipse(
            this.clip.disc.x,
            this.clip.disc.y,
            this.clip.disc.w,
            this.clip.disc.h,
            0,
            0,
            Math.PI * 2
          );
          this.clip.path.rect(
            this.clip.disc.x - this.clip.disc.w,
            0,
            this.clip.disc.w * 2,
            this.clip.disc.y
          );
        }

        setLines() {
          const { width, height } = this.rect;

          this.lines = [];

          const totalLines = 100;
          const linesAngle = (Math.PI * 2) / totalLines;

          for (let i = 0; i < totalLines; i++) {
            this.lines.push([]);
          }

          this.discs.forEach((disc) => {
            for (let i = 0; i < totalLines; i++) {
              const angle = i * linesAngle;

              const p = {
                x: disc.x + Math.cos(angle) * disc.w,
                y: disc.y + Math.sin(angle) * disc.h,
              };

              this.lines[i].push(p);
            }
          });

          this.linesCanvas = new OffscreenCanvas(width, height);
          const ctx = this.linesCanvas.getContext("2d");

          this.lines.forEach((line, i) => {
            ctx.save();

            let lineIsIn = false;
            line.forEach((p1, j) => {
              if (j === 0) {
                return;
              }

              const p0 = line[j - 1];

              if (
                !lineIsIn &&
                (ctx.isPointInPath(this.clip.path, p1.x, p1.y) ||
                  ctx.isPointInStroke(this.clip.path, p1.x, p1.y))
              ) {
                lineIsIn = true;
              } else if (lineIsIn) {
                ctx.clip(this.clip.path);
              }

              ctx.beginPath();

              ctx.moveTo(p0.x, p0.y);
              ctx.lineTo(p1.x, p1.y);

              ctx.strokeStyle = "rgba(68, 68, 68, 0.3)";
              ctx.lineWidth = 1;
              ctx.stroke();

              ctx.closePath();
            });

            ctx.restore();
          });

          this.linesCtx = ctx;
        }

        setCodeParticles() {
          const { width, height } = this.rect;

          this.particles = [];

          this.particleArea = {
            sw: this.clip.disc.w * 0.5,
            ew: this.clip.disc.w * 2,
            h: height * 0.85,
          };
          this.particleArea.sx = (width - this.particleArea.sw) / 2;
          this.particleArea.ex = (width - this.particleArea.ew) / 2;

          const totalParticles = 25;

          for (let i = 0; i < totalParticles; i++) {
            const particle = this.initCodeParticle(true);
            this.particles.push(particle);
          }
        }

        initCodeParticle(start = false) {
          const sx =
            this.particleArea.sx + this.particleArea.sw * Math.random();
          const ex =
            this.particleArea.ex + this.particleArea.ew * Math.random();
          const dx = ex - sx;
          const y = start
            ? this.particleArea.h * Math.random()
            : this.particleArea.h;
          const vy = 0.3 + Math.random() * 0.8;

          // Pick random code text
          const codeText =
            this.codeTexts[Math.floor(Math.random() * this.codeTexts.length)];

          return {
            x: sx,
            sx,
            dx,
            y,
            vy,
            p: 0,
            text: codeText,
            opacity: 0.2 + Math.random() * 0.3,
            rotation: Math.random() * Math.PI * 2,
            rotationSpeed: (Math.random() - 0.5) * 0.02,
            scale: 0.5 + Math.random() * 0.5,
          };
        }

        tweenValue(start, end, p, ease = false) {
          const delta = end - start;

          const easeFn =
            easingUtils[
              ease
                ? "ease" + ease.charAt(0).toUpperCase() + ease.slice(1)
                : "linear"
            ];

          return start + delta * easeFn(p);
        }

        drawDiscs() {
          const { ctx } = this;

          ctx.strokeStyle = "rgba(68, 68, 68, 0.4)";
          ctx.lineWidth = 1;

          // Outer disc
          const outerDisc = this.startDisc;

          ctx.beginPath();

          ctx.ellipse(
            outerDisc.x,
            outerDisc.y,
            outerDisc.w,
            outerDisc.h,
            0,
            0,
            Math.PI * 2
          );
          ctx.stroke();

          ctx.closePath();

          // Discs
          this.discs.forEach((disc, i) => {
            if (i % 5 !== 0) {
              return;
            }

            if (disc.w < this.clip.disc.w - 5) {
              ctx.save();
              ctx.clip(this.clip.path);
            }

            ctx.beginPath();

            ctx.ellipse(disc.x, disc.y, disc.w, disc.h, 0, 0, Math.PI * 2);
            ctx.stroke();

            ctx.closePath();

            if (disc.w < this.clip.disc.w - 5) {
              ctx.restore();
            }
          });
        }

        drawLines() {
          const { ctx, linesCanvas } = this;
          ctx.drawImage(linesCanvas, 0, 0);
        }

        drawCodeParticles() {
          const { ctx } = this;

          ctx.save();
          ctx.clip(this.clip.path);

          this.particles.forEach((particle) => {
            ctx.save();

            ctx.globalAlpha = particle.opacity;
            ctx.translate(particle.x, particle.y);
            ctx.rotate(particle.rotation);
            ctx.scale(particle.scale, particle.scale);

            // Draw code text
            ctx.font = "10px 'Martian Mono', monospace";
            ctx.fillStyle = "rgba(0, 255, 100, 0.4)";
            ctx.shadowColor = "rgba(0, 255, 100, 0.3)";
            ctx.shadowBlur = 5;
            ctx.textAlign = "center";
            ctx.fillText(particle.text, 0, 0);

            ctx.restore();
          });

          ctx.restore();
        }

        moveDiscs() {
          this.discs.forEach((disc) => {
            disc.p = (disc.p + 0.001) % 1;
            this.tweenDisc(disc);
          });
        }

        moveCodeParticles() {
          this.particles.forEach((particle) => {
            particle.p = 1 - particle.y / this.particleArea.h;
            particle.x = particle.sx + particle.dx * particle.p;
            particle.y -= particle.vy;
            particle.rotation += particle.rotationSpeed;

            // Fade in/out based on position
            if (particle.y > this.particleArea.h * 0.8) {
              particle.opacity = Math.max(
                0,
                (this.particleArea.h - particle.y) / (this.particleArea.h * 0.2)
              );
            } else if (particle.y < this.particleArea.h * 0.2) {
              particle.opacity = Math.min(
                0.8,
                particle.y / (this.particleArea.h * 0.2)
              );
            }

            if (particle.y < -50) {
              // Reset particle
              const newParticle = this.initCodeParticle();
              Object.assign(particle, newParticle);
            }
          });
        }

        tweenDisc(disc) {
          disc.x = this.tweenValue(this.startDisc.x, this.endDisc.x, disc.p);
          disc.y = this.tweenValue(
            this.startDisc.y,
            this.endDisc.y,
            disc.p,
            "inExpo"
          );

          disc.w = this.tweenValue(this.startDisc.w, this.endDisc.w, disc.p);
          disc.h = this.tweenValue(this.startDisc.h, this.endDisc.h, disc.p);

          return disc;
        }

        tick(time) {
          const { ctx } = this;

          ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

          ctx.save();
          ctx.scale(this.render.dpi, this.render.dpi);

          this.moveDiscs();
          this.moveCodeParticles();

          this.drawDiscs();
          this.drawLines();
          this.drawCodeParticles();

          ctx.restore();

          requestAnimationFrame(this.tick.bind(this));
        }
      }

      customElements.define("a-hole", AHole);
    </script>
  </body>
</html>